%%{init: {
  "theme": "base",
  "themeVariables": {
    "fontSize": "24px",
    "fontFamily": "Helvetica",
    "primaryTextColor": "#111111",
    "lineColor": "#222222",
    "primaryColor": "#EAF2F2",
    "primaryBorderColor": "#5E6B73"
  },
  "flowchart": {
    "nodeSpacing": 52,
    "rankSpacing": 90,
    "curve": "basis"
  }
}}%%
flowchart TB
  C["codelabs"]

  subgraph L["Learning Flow (FK to codelabs.id)"]
    direction LR
    S["steps"]
    AT["attendees"]
    Q["quizzes"]
    M["materials"]
  end

  subgraph R["Realtime Operations (FK to codelabs.id)"]
    direction LR
    H["help_requests"]
    I["inline_comment_threads"]
    CH["chat_messages"]
  end

  subgraph A["Assessment + AI/Workspace (FK to codelabs.id)"]
    direction LR
    F["feedback"]
    SUB["submissions"]
    QS["quiz_submissions"]
    AI["ai_conversations"]
    CS["codeserver_workspaces"]
  end

  C -->|"1:N"| S
  C -->|"1:N"| AT
  C -->|"1:N"| Q
  C -->|"1:N"| M

  C -->|"1:N"| H
  C -->|"1:N"| I
  C -->|"1:N"| CH

  C -->|"1:N"| F
  C -->|"1:N"| SUB
  C -->|"1:N"| QS
  C -->|"1:N"| AI
  C -->|"1:N"| CS
