# Open Codelabs (Hands-on System)

[![Rust](https://img.shields.io/badge/rust-v1.75+-orange.svg)](https://www.rust-lang.org/)
[![Svelte](https://img.shields.io/badge/svelte-v5-ff3e00.svg)](https://svelte.dev/)
[![Bun](https://img.shields.io/badge/bun-v1.0+-black.svg)](https://bun.sh/)
[![Docker](https://img.shields.io/badge/docker-blue.svg)](https://www.docker.com/)
[![Firebase](https://img.shields.io/badge/firebase-yellow.svg)](https://firebase.google.com/)
[![Supabase](https://img.shields.io/badge/supabase-3FCF8E.svg)](https://supabase.com/)

**Open Codelabs** is an open-source platform designed to easily host and manage Google Codelab-style hands-on sessions. Built with a modern tech stack, it supports both Facilitator and Attendee roles, with content managed via Markdown or generated by AI.

[English](README.md) | [ÌïúÍµ≠Ïñ¥](README.ko.md) | [Êó•Êú¨Ë™û](README.ja.md) | [‰∏≠Êñá](README.zh.md)

![Open Codelabs Hero](docs/imgs/20260208-rzac.png)

---

## üöÄ Key Features

- **Facilitator & Attendee Separation**: Admins can create and manage codelabs, while participants follow steps through a refined UI.
- **AI Codelab Generator**: Automatically generate professional-grade codelabs from source code or reference documents using Google Gemini AI, featuring persistent conversation threads.
- **Audit Logs & Backups**: Track administrative actions with detailed audit logs and manage system data through easy backup and restore functionality.
- **Code Server Workspaces (Optional)**: Create per-codelab code-server workspaces with step snapshots (branch/folder mode) and downloadable archives.
- **Quizzes, Feedback, and Certificates**: Gate certificate issuance with quiz scores and feedback submission; auto-generate verification URLs.
- **Prep Guide & Materials**: Author or AI-generate preparation guides and manage downloadable links/files per codelab.
- **Live Tools for Workshops**: Live chat/DM, help-queue with real-time resolution, submissions panel, and a roulette raffle that draws only from certificate holders.
- **Multi-Runtime Support**: Run using a **Rust (Axum) + SQLite** backend for local/private sessions, or deploy with **Firebase (Firestore/Hosting)** or **Supabase** for a serverless experience.
- **Google Codelab Look & Feel**: Familiar and highly readable design inspired by Google's own codelabs.
- **Easy Public Access**: Integrated scripts for `ngrok`, `bore`, and `cloudflared` (Cloudflare Tunnel) to instantly expose your local server with QR code support for participants.
- **Multi-language Support**: Built-in i18n support for global workshops (English, Korean, Japanese, Chinese).

---

## ‚ö° Quickstart

Get the system up and running in seconds:

```bash
# Clone the repository
git clone https://github.com/JAICHANGPARK/open-codelabs.git
cd open-codelabs

# Start with Docker Compose
docker compose up --build
```

### ü¶≠ For Podman Users
If you are using Podman, you can use `podman-compose`:
```bash
podman-compose up --build
```
Or use the Podman Docker compatibility layer.

---

## üõ† Tech Stack

### Frontend
- **Framework**: [SvelteKit 5](https://svelte.dev/) (Vite + TypeScript)
- **Runtime**: [Bun](https://bun.sh/)
- **Styling**: Tailwind CSS 4.0
- **State Management**: Svelte Runes
- **i18n**: `svelte-i18n`

### Backend (Self-hosted)
- **Language**: [Rust](https://www.rust-lang.org/)
- **Framework**: Axum (Tokio stack)
- **Database**: SQLite (via [SQLx](https://github.com/launchbadge/sqlx))

### Cloud (Serverless Option)
- **Platform**: [Firebase](https://firebase.google.com/) (Hosting, Firestore, Storage) or [Supabase](https://supabase.com/) (Postgres, Auth, Storage, Realtime)

---

## üìÇ Project Structure

```text
open-codelabs/
‚îú‚îÄ‚îÄ backend/          # Rust Axum API Server
‚îÇ   ‚îú‚îÄ‚îÄ src/          # API Logic
‚îÇ   ‚îî‚îÄ‚îÄ migrations/   # Database Migrations
‚îú‚îÄ‚îÄ frontend/         # SvelteKit Client
‚îÇ   ‚îú‚îÄ‚îÄ src/          # Components, Routes, & Libs
‚îÇ   ‚îî‚îÄ‚îÄ static/       # Static Assets
‚îú‚îÄ‚îÄ docs/             # Documentation (MkDocs)
‚îú‚îÄ‚îÄ docker-compose.yml # System Orchestration
‚îî‚îÄ‚îÄ run-public.sh     # Public Deployment Script (ngrok/bore/cloudflare)
```

---

## üö¶ Getting Started

### Prerequisites
- [Docker](https://www.docker.com/) & Docker Compose
- [Bun](https://bun.sh/) (For local development)
- [Rust](https://www.rust-lang.org/) (For local backend development)

### 1. Run with Docker (Recommended)
The simplest way to get the full system up and running.

> **Note**: By default, data is stored in `~/open-codelabs` on your host machine. You can customize this by editing `DATA_VOLUME_PATH` in the `.env` file at the root directory.
> - **macOS/Linux**: `~/open-codelabs`
> - **Windows**: `C:/open-codelabs` (Use forward slashes `/`)

```bash
docker compose up --build
```
- **Frontend**: [http://localhost:5173](http://localhost:5173)
- **Backend API**: [http://localhost:8080](http://localhost:8080)

### 2. Local Development

#### Backend
```bash
cd backend
# Create .env (DATABASE_URL=sqlite:data/sqlite.db?mode=rwc)
# Required: ADMIN_ID, ADMIN_PW
cargo run
```

#### Frontend
```bash
cd frontend
bun install
# Create .env (VITE_API_URL=http://localhost:8080)
bun run dev
```

### 3. Environment Variables (.env)

Docker Compose reads `.env` at the repo root. Copy `.env.sample` to `.env` and adjust as needed.

**Backend**
- `DATABASE_URL`: SQLx connection string (sqlite/postgres). Example: `sqlite:/app/data/sqlite.db?mode=rwc`.
- `ADMIN_ID`: Admin login username.
- `ADMIN_PW`: Admin login password; also used to decrypt Gemini API keys from the frontend.
- `ALLOWED_GEMINI_MODELS`: Comma-separated allowlist of Gemini model IDs.

**AI**
- `GEMINI_API_KEY`: Default Gemini API key if an admin key is not provided.

**Frontend**
- `VITE_API_URL`: Base URL for the backend API.
- `VITE_ADMIN_ENCRYPTION_PASSWORD`: Must match backend `ADMIN_PW`.

---

## ü§ñ AI Codelab Generator
Open Codelabs features a built-in AI generator that transforms your code into structured tutorials.
1. Enter your Gemini API Key in the settings.
2. Provide source code or a technical description.
3. Let AI generate steps, explanations, and verification audits.
4. **Persistent Threads**: AI-generated content includes conversation history for context-aware refinements.

---

## üß≠ Facilitator Toolkit (New)
- **Live Mode**: Monitor attendees, real-time chat/DM, and resolve help requests instantly.
- **Audit Logs**: Track all administrative actions (login, codelab creation, settings updates) for accountability.
- **Backup & Restore**: Easily export and import the entire system state (SQLite database) from the admin panel.
- **Quiz & Feedback**: Configure completion requirements; results are aggregated per attendee.
- **Prep Guide & Materials**: Draft preparation guides and manage attachments.
- **Certificate Raffle**: Spin a roulette that selects only certificate-issued attendees.

---

## üåê Exposing to Public (ngrok / bore / cloudflare)
When hosting a workshop on your local machine, use the `run-public.sh` script to provide external access.

```bash
chmod +x run-public.sh
./run-public.sh --ngrok  # Using ngrok
# OR
./run-public.sh --bore   # Using bore (Rust-based)
# OR
./run-public.sh --cloudflare  # Using Cloudflare Tunnel
```

---

## üìö Documentation
Full documentation is available at GitHub Pages:
**[üìñ View Open Codelabs Documentation](https://JAICHANGPARK.github.io/open-codelabs/)**

Additional guides:
- [Code Server Workspace Setup](docs/CODE_SERVER_SETUP.md)

---

## üìÑ License
This project is licensed under the [Apache License 2.0](LICENSE).
